package com.pku.xiaoyoubang.model;import java.util.List;import android.content.Context;import android.view.LayoutInflater;import android.view.View;import android.view.View.OnClickListener;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.TextView;import com.nostra13.universalimageloader.core.ImageLoader;import com.pku.xiaoyoubang.R;import com.pku.xiaoyoubang.entity.CommentEntity;import com.pku.xiaoyoubang.tool.Information;import com.pku.xiaoyoubang.tool.Tool;public class CommentListAdapter extends BaseAdapter{	private Context context;	private List< CommentEntity > list;	private ImageLoader imageLoader;	private CommentListener listener;		public CommentListAdapter( Context context, List< CommentEntity > list )	{		this.context = context;		this.list = list;		this.imageLoader = ImageLoader.getInstance();	}		public List< CommentEntity > getList()	{		return list;	} 		public int getCount() 	{		return list.size();	}	public CommentEntity getItem( int position ) 	{		return list.get( position );	}	public long getItemId( int position ) 	{		return position;	}	public View getView( final int position, View convertView, ViewGroup parent )	{		ViewHolder viewHolder;		if( convertView == null )		{			convertView = LayoutInflater.from( context ).inflate( R.layout.comment_list_item, null );			viewHolder = new ViewHolder();						viewHolder.headImage = ( ImageView ) convertView.findViewById( R.id.comment_list_item_head );			viewHolder.textName = ( TextView ) convertView.findViewById( R.id.comment_list_item_name );			viewHolder.textTime = ( TextView ) convertView.findViewById( R.id.comment_list_item_time );			viewHolder.textCommentInfo = ( TextView ) convertView.findViewById( R.id.comment_list_item_comment );			viewHolder.textIndex = ( TextView ) convertView.findViewById( R.id.comment_list_item_index );						convertView.setTag( viewHolder );		}		else		{			viewHolder = ( ViewHolder ) convertView.getTag(); 		}				CommentEntity entity = list.get( position );		imageLoader.displayImage( Information.Server_Url + entity.getUserHeadUrl(), viewHolder.headImage, Information.options );				viewHolder.headImage.setOnClickListener		(			new OnClickListener()			{				public void onClick( View view )				{					listener.showCommentHead( position );				}			}		);				if( entity.getType() == 0 )		{			viewHolder.textIndex.setText( ( list.size() - position ) + "评" );		}		else		{			viewHolder.textIndex.setText( ( list.size() - position ) + "报" );		}		viewHolder.textName.setText( entity.getUserName() );		viewHolder.textTime.setText( Tool.getShowTime( entity.getTime() ) );		if( entity.getReplyName().equals( "" ) )		{			viewHolder.textCommentInfo.setText( entity.getCommentInfo() );		}		else		{			String value = "回复 " + entity.getReplyName() + "：" + entity.getCommentInfo();			viewHolder.textCommentInfo.setText( value );		}		return convertView;	}		static class ViewHolder	{		ImageView headImage;		TextView textName;		TextView textTime;		TextView textCommentInfo;		TextView textIndex;	}		public void setMyListener( CommentListener listener )	{		this.listener = listener;	}		public interface CommentListener	{		public void showCommentHead( int index );	}}